<!DOCTYPE html>
<html>
  <head>
    <title>Realidade Aumentada by Lady</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.4.5/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  </head>  
  <body>
    <a-scene cursor="rayOrigin: mouse" raycaster="">
      <!--Midia Content-->
      <a-assets arjs='sourceType: webcam'>
        <img id="cachorro" src="assets/image/cachorro.jpg" crossorigin="anonymous">
        <video id="video" playsinline="" autoplay="true" loop="true" src="assets/video/cat-anime.mp4" crossorigin="anonymous"></video>  
      </a-assets>

      <!--Token/Icon Interpreter-->
      <a-entity raycaster="" cursor="">
        <a-marker type="pattern" url="assets/markers/patt/pattern-cubo-1.patt" arjs-anchor="" arjs-hit-testing="" material="">
          <a-image cursor="" src="#cachorro" width="5" height="5" position="0 0 0" rotation="-90 0 0" raycaster=""></a-image>
        </a-marker>
      </a-entity>
      <a-entity raycaster="" cursor="">
        <a-marker preset="hiro" arjs-anchor="" arjs-hit-testing="" material="">
          <a-cone color="yellow" depth="2" height="4" width="5"></a-cone>
        </a-marker>
      </a-entity>
      <a-entity id="video-entity" raycaster="" cursor="">
        <a-marker preset="kanji" arjs-anchor="" arjs-hit-testing="" material="">
          <a-video src="#video" width="5" height="5" position="0 0 0" rotation="-90 0 0" material="" geometry=""></a-video>
        </a-marker>
      </a-entity> 

      <!-- Initialize camera-->
      <a-entity camera look-controls position="0 0 0"></a-entity>
        
    </a-scene>
    <script> 
      document.querySelectorAll('#video-entity').forEach(elm =>{
        elm.addEventListener('markerFound', function(){
          var video = document.querySelector('#video');
          video.play();
        });
        elm.addEventListener('markerLost', function(){
          video.pause();
        });
      });
    </script>
  </body>
</html>
